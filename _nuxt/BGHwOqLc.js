import{bT as R,bU as U,D as V,bV as I,c as M,A as P,H as b,i as h,w as f,U as j,I as B,bl as q,T as D,bW as N,bX as w,bY as C,bZ as H,z as X,bj as F,r as G,ay as Y,d as T,f as m,n as _,V as l,b_ as Z,b$ as x,c0 as J,e as L,c1 as K,c2 as O,F as Q,aC as A,k as ee,c3 as te,p as ne,m as oe}from"./C2Cjjib9.js";function ae(i){const e=new WeakMap,v=R();function g(n){if(i.mode!=="popLayout")return;const r=n.element.offsetParent,u=r instanceof HTMLElement&&r.offsetWidth||0,o={height:n.element.offsetHeight||0,width:n.element.offsetWidth||0,top:n.element.offsetTop,left:n.element.offsetLeft,right:0};o.right=u-o.width-o.left;const s=i.anchorX==="left"?`left: ${o.left}`:`right: ${o.right}`;n.element.dataset.motionPopId=n.id;const t=document.createElement("style");v.value.nonce&&(t.nonce=v.value.nonce),e.set(n,t),document.head.appendChild(t),t.sheet&&t.sheet.insertRule(`
    [data-motion-pop-id="${n.id}"] {
      position: absolute !important;
      width: ${o.width}px !important;
      height: ${o.height}px !important;
      top: ${o.top}px !important;
      ${s}px !important;
      }
      `)}function p(n){const r=e.get(n);r&&(e.delete(n),U.render(()=>{document.head.removeChild(r)}))}return{addPopStyle:g,removePopStyle:p,styles:e}}function W(i){return Promise.resolve().then(()=>{i()})}const se=V({name:"AnimatePresence",inheritAttrs:!0,__name:"AnimatePresence",props:{mode:{default:"sync"},initial:{type:Boolean,default:!0},as:{},custom:{},onExitComplete:{},anchorX:{default:"left"}},setup(i){const e=i;I(e);const{addPopStyle:v,removePopStyle:g,styles:p}=ae(e);function n(t){let a=t;for(;a;){if(w.get(a))return a;a=a.firstElementChild}return null}function r(t){const a=w.get(t);a&&(g(a),a.isVShow=!0,C(t),W(()=>{a.setActive("exit",!1)}))}const u=new Map;M(()=>{u.clear()});function o(t,a){var y;const d=n(t),c=w.get(d);if(!d||!c){a(),u.size===0&&((y=e.onExitComplete)==null||y.call(e));return}u.set(d,!0),C(d),v(c);function S(k){var z,E;if((z=k==null?void 0:k.detail)!=null&&z.isExit){const $=c.visualElement.projection;if(($==null?void 0:$.animationProgress)>0&&!c.isSafeToRemove&&!c.isVShow)return;C(d),u.delete(d),u.size===0&&((E=e.onExitComplete)==null||E.call(e)),p.has(c)?g(c):c.willUpdate("done"),a(),d.isConnected||c.unmount(!0)}}W(()=>{c.setActive("exit",!0),H.set(d,S),d.addEventListener("motioncomplete",S)})}const s=P(()=>e.mode!=="wait"?{tag:e.as}:{mode:e.mode==="wait"?"out-in":void 0});return(t,a)=>(h(),b(q(t.mode==="wait"?D:N),B({css:!1},s.value,{appear:"",onEnter:r,onLeave:o}),{default:f(()=>[j(t.$slots,"default")]),_:3},16))}}),ie={slots:{base:"rounded-md",overlay:"fixed inset-0 bg-default/75 backdrop-blur-sm will-change-opacity",content:"fixed inset-0 flex items-center justify-center cursor-zoom-out focus:outline-none p-4 sm:p-8"},variants:{zoom:{true:"will-change-transform"},open:{true:""}},compoundVariants:[{zoom:!0,open:!1,class:"cursor-zoom-in"}]},le=["onClick"],ue={__name:"ProseImg",props:{src:{type:String,required:!0},alt:{type:String,required:!0},width:{type:[String,Number],required:!1},height:{type:[String,Number],required:!1},class:{type:null,required:!1},zoom:{type:Boolean,required:!1,default:!0},ui:{type:null,required:!1}},setup(i){const e=i,v=X(),[g,p]=F(),n=G(!1),r=P(()=>{var o,s;return A({extend:A(ie),...((s=(o=v.uiPro)==null?void 0:o.prose)==null?void 0:s.img)||{}})({zoom:e.zoom,open:n.value})}),u=P(()=>{var o;if((o=e.src)!=null&&o.startsWith("/")&&!e.src.startsWith("//")){const s=ee(te(ne().app.baseURL));if(s!=="/"&&!e.src.startsWith(s))return oe(s,e.src)}return e.src});return e.zoom&&Y(window,"scroll",()=>{n.value=!1}),(o,s)=>(h(),T(Q,null,[m(l(g),null,{default:f(()=>{var t;return[(h(),b(q(l(Z)),{src:u.value,alt:i.alt,width:i.width,height:i.height,class:_(r.value.base({class:[(t=e.ui)==null?void 0:t.base,e.class]}))},null,8,["src","alt","width","height","class"]))]}),_:1}),i.zoom?(h(),b(l(O),{key:0,open:n.value,"onUpdate:open":s[0]||(s[0]=t=>n.value=t),modal:!1},{default:f(({close:t})=>[m(l(J),{"as-child":""},{default:f(()=>[m(l(x),{"layout-id":u.value,"as-child":"",transition:{type:"spring",bounce:.2,duration:.4}},{default:f(()=>[m(l(p))]),_:1},8,["layout-id"])]),_:1}),m(l(K),null,{default:f(()=>[m(l(se),null,{default:f(()=>{var a,y;return[n.value?(h(),b(l(x),{key:0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},class:_(r.value.overlay({class:[(a=e.ui)==null?void 0:a.overlay]}))},null,8,["class"])):L("",!0),n.value?(h(),T("div",{key:1,class:_(r.value.content({class:[(y=e.ui)==null?void 0:y.content]})),onClick:t},[m(l(x),{"as-child":"","layout-id":u.value,transition:{type:"spring",bounce:.2,duration:.4}},{default:f(()=>[m(l(p))]),_:1},8,["layout-id"])],10,le)):L("",!0)]}),_:2},1024)]),_:2},1024)]),_:1},8,["open"])):(h(),b(l(p),{key:1}))],64))}};export{ue as default};
